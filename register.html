<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Almaris — Hotel Website Template</title>
    <link rel="icon" href="images/icon.webp" type="image/gif" sizes="16x16" />
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="Almaris — Hotel Website Template" name="description" />
    <meta content="" name="keywords" />
    <meta content="" name="author" />
    <!-- CSS Files
    ================================================== -->
    <link
      href="css/bootstrap.min.css"
      rel="stylesheet"
      type="text/css"
      id="bootstrap"
    />
    <link href="css/plugins.css" rel="stylesheet" type="text/css" />
    <link href="css/swiper.css" rel="stylesheet" type="text/css" />
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <link href="css/coloring.css" rel="stylesheet" type="text/css" />
    <!-- color scheme -->
    <link
      id="colors"
      href="css/scheme-01.css"
      rel="stylesheet"
      type="text/css"
    />
  </head>
  <body>
    <div id="wrapper">
      <!-- <a href="#" id="back-to-top"></a> -->

      <!-- page preloader begin -->
      <div id="de-loader"></div>
      <!-- page preloader close -->
      <!-- content begin -->
      <div class="no-bottom no-top" id="content">
        <div id="top"></div>

        <section id="subheader" class="relative jarallax text-light">
          <img src="images/3.webp" class="jarallax-img" alt="" />
          <div class="container relative z-index-1000">
            <div class="row justify-content-center">
              <div class="col-lg-6 text-center">
                <h1>Register</h1>
                <p class="mt-3 lead">
                  Ready to elevate your travel experience? Reserve your room now
                  and step into a world of comfort and luxury. Your perfect stay
                  is just a click away.
                </p>
              </div>
            </div>
          </div>
          <div class="de-overlay"></div>
        </section>

        <div style="padding: 50px 0px">
          <section id="section_form" class="relative lines-deco">
            <div class="container">
              <div class="row">
                <div class="col-lg-6 offset-lg-3">
                  <div id="success_message" class="text-center">
                    <h2>Your reservation has been sent successfully.</h2>
                    <div class="col-lg-8 offset-lg-2">
                      <p>
                        We will contact you shortly. Refresh this page if you
                        want to make another reservation.
                      </p>

                      <img
                        src="images/2.webp"
                        class="w-100 rounded-up-100"
                        alt=""
                      />
                    </div>
                  </div>

                  <div id="booking_form_wrap">
                    <form
                      name="contactForm"
                      id="registerForm"
                      class="form-border login"
                    >
                      <div class="row">
                        <div class="col-md-12">
                          <div class="form-group">
                            <label for="fullname" class=""
                              >Enter Fullname</label
                            >
                            <input
                              type="text"
                              name="fullname"
                              id="fullname"
                              class="form-control"
                              placeholder="Your Name"
                              required=""
                            />
                          </div>
                          <div class="form-group">
                            <label for="email" class="">Enter Email</label>
                            <input
                              type="email"
                              name="email"
                              id="email"
                              class="form-control"
                              placeholder="Your Email"
                              required=""
                            />
                          </div>
                          <div class="form-group">
                            <label for="password" class=""
                              >Enter Password</label
                            >
                            <input
                              type="password"
                              name="password"
                              id="password"
                              class="form-control"
                              placeholder="Your Password"
                              required=""
                            />
                          </div>
                        </div>
                      </div>
                      <div class="col-md-12">
                        <p id="submit">
                          <input
                            type="submit"
                            id="send_message"
                            value="Submit"
                            class="btn-main"
                          />
                        </p>
                      </div>
                    </form>
                    <div class="register-action">
                      <p>Already have an accout?</p>
                      <a href="login.html">Login!</a>
                    </div>
                    <div id="error_message" class="error">
                      Sorry, error occured this time sending your message.
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
      <!-- content close -->

      <!-- footer begin -->
      <footer class="text-light section-dark">
        <div class="container">
          <div class="row g-4 align-items-center">
            <div class="col-md-12">
              <div
                class="d-lg-flex align-items-center justify-content-between text-center"
              >
                <div>
                  <h3 class="fs-20">Address</h3>
                  742 Evergreen Terrace<br />
                  Brooklyn, NY 11201
                </div>
                <div>
                  <img
                    src="images/logo-white.webp"
                    class="w-200px"
                    alt=""
                  /><br />
                  <div class="social-icons mb-sm-30 mt-4">
                    <a href="#"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#"><i class="fa-brands fa-twitter"></i></a>
                    <a href="#"><i class="fa-brands fa-youtube"></i></a>
                  </div>
                </div>
                <div>
                  <h3 class="fs-20">Contact Us</h3>
                  T. +929 333 9296<br />
                  M. contact@almaris.com
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="subfooter">
          <div class="container">
            <div class="row">
              <div class="col-md-12 text-center">
                Copyright 2025 - Almaris by Designesia
              </div>
            </div>
          </div>
        </div>
      </footer>
      <!-- footer close -->
    </div>
    <script src="js/plugins.js"></script>
    <script src="js/designesia.js"></script>
    <script src="js/validation-booking.js"></script>
    <script src="main.js"></script>

    <script>
      document
        .getElementById("registerForm")
        .addEventListener("submit", async (event) => {
          event.preventDefault();

          const email = document.getElementById("email").value;
          const password = document.getElementById("password").value;

          // Retrieve existing users from local storage or initialize as an empty array
          const existingUsers =
            JSON.parse(localStorage.getItem("existing-users")) || [];

          // Check if the user already exists
          const userExists = existingUsers.includes(email);

          if (true) {
            // Add the new user to local storage
            existingUsers.push(email);
            localStorage.setItem(
              "existing-users",
              JSON.stringify(existingUsers)
            );

            const payload = {
              user: {
                id: `user-${Date.now()}`,
                email: email,
                name: email,
                createdAt: new Date().toISOString(),
                lastLoginDate: new Date().toISOString(),
                totalOrders: 0,
                totalSpend: 0,
                totalPoints: 0,
                status: "active",
              },
              type: "sign_up",
            };

            try {
              const apiKey = "rdwdkywgorzoop37cqghg";
              // Make API call
              const response = await fetch(
                "https://paas.usemeprotocol.com/v1/api/earning/brand/event/push",
                {
                  method: "POST",
                  headers: {
                    accept: "*/*",
                    "x-public-key": apiKey,
                    "Content-Type": "application/json",
                    Authorization: `Bearer ${apiKey}`,
                  },
                  body: JSON.stringify(payload),
                }
              );

              if (!response.ok) {
                throw new Error("Failed to log in. Please try again.");
              }

              const data = await response.json();
              console.log("API Response:", data);
            } catch (error) {
              console.error("Error:", error);
              alert("An error occurred during login.");
              return;
            }
          } else {
            console.log(
              "User already exists in local storage. Skipping API call."
            );
          }

          // Save email to local storage and redirect
          localStorage.setItem("email", email);
          window.customerEmail = email;
          window.location.href = "/index.html";
        });
    </script>
  </body>
</html>
